import{M}from"./MjButton-BmN55pLQ.js";import{M as S}from"./index-BA0Druey.js";import{m as C}from"./MjMessage-B6PxiNxc.js";import{M as O}from"./MjModal-D8GbfQV7.js";import{M as q}from"./MjTable-D9Fewee_.js";import{M as k}from"./MjInput-dmF8qiW0.js";import{B as V}from"./BinaryWriter-4Snmgu5s.js";import{g as $}from"./index-C1s-hTSf.js";import{d as D,o as I,b as B,v as c,a as f,c as G,x as H,e as t,f as e,w as a,s as g,t as u,u as w,_ as K}from"./index-C8_KvqLc.js";import{M as o}from"./MjTag-DUeHPqZh.js";import"./LoadingIcon.vue_vue_type_script_setup_true_lang-Cjl4ccjb.js";import"./CloseIcon.vue_vue_type_script_setup_true_lang-BO1-knco.js";import"./MjCheckbox-CRx5YV5s.js";const P={class:"mj-alert"},Q=D({__name:"MjAlert",props:{message:{}},setup(A){return(y,p)=>(I(),B("div",P,c(y.message),1))}}),X={class:"jishaochengduo"},Y={class:"jishaochengduo-tags"},Z={class:"jishaochengduo-tags"},ee={class:"jishaochengduo-tags"},ae={class:"jishaochengduo-tags"},se={class:"jishaochengduo-tags"},te={class:"jishaochengduo-tags"},ue={class:"jishaochengduo-tags"},le={class:"jishaochengduo-tags"},oe={class:"jishaochengduo-tags"},re={class:"jishaochengduo-tags"},ne={class:"jishaochengduo-btns"},ie=D({__name:"JiShaoChengDuo",setup(A){const y=S.FormItem,p=f(!1),E=f(),m=f([]),x=f("add"),v=f({}),_=G(()=>m.value.reduce((s,r)=>({mileage:s.mileage+v.value[r].mileage,exp:s.exp+v.value[r].exp}),{mileage:0,exp:0})),l=(s=95)=>{if(_.value.exp>=2e4)return"完成";if(_.value.mileage>=1e4)return"失败";const r=1e4-_.value.mileage,d=(2e4-_.value.exp-r)*100/r-s;if(d<=0)return">=250公里";const h=90*100/d;if(h<250)return"失败";const j=40*100/d;return j<250?`可能失败，250公里 ~ ${Math.floor(h)}公里`:`250公里 ~ ${Math.floor(j)}公里`},R=[{title:"里程",name:"mileage"},{title:"经验",name:"exp"},{title:"操作",name:"operation",slotName:"operation"}],n=f({mileage:"",exp:"",uuid:""}),T=()=>{if(!n.value.mileage){C.error("请输入里程");return}if(!n.value.exp){C.error("请输入经验");return}if(n.value.uuid)v.value[n.value.uuid]={...n.value,mileage:+n.value.mileage,exp:+n.value.exp};else{const s={mileage:+n.value.mileage,exp:+n.value.exp,uuid:$()};v.value[s.uuid]=s,m.value.push(s.uuid)}b()};H([p],()=>{p.value===!1&&(n.value={mileage:"",exp:"",uuid:""})});const z=()=>{x.value="add",p.value=!0},J=s=>{x.value="edit",p.value=!0,n.value={...s,mileage:s.mileage.toString(),exp:s.exp.toString()}},N=s=>{x.value="add",p.value=!0,n.value={...s,uuid:"",mileage:s.mileage.toString(),exp:s.exp.toString()}},U=()=>{const s=new V("Read",1),r=localStorage.getItem("ets2_JSCD");if(r){s.setRawData(r);const i=s.readArray(d=>d.readString());return s.readArray(d=>{const h={};return i.forEach(j=>{h[j]=d.readInt32()}),h})}return[]};m.value=U().map(s=>{const r=$();return v.value[r]={...s,saveLocal:!0,uuid:r},r});const b=()=>{const s=new V("Write",1e5),r=["mileage","exp"];s.writeArray(r,(d,h)=>{h.writeString(d)});const i=m.value.map(d=>v.value[d]);s.writeArray(i,(d,h)=>{r.forEach(j=>{h.writeInt32(d[j])})}),localStorage.setItem("ets2_JSCD",s.getRawDataStr())},F=s=>{delete v.value[s.uuid],m.value=m.value.filter(r=>r!==s.uuid),b()},L=f([]),W=s=>{L.value=s};return(s,r)=>(I(),B("div",X,[t("div",null,[e(Q,{message:`总里程：${_.value.mileage}公里，总经验：${_.value.exp}，剩余里程：${Math.max(0,1e4-_.value.mileage)}公里，总经验：${Math.max(0,2e4-_.value.exp)}，总共跑了${m.value.length}趟`},null,8,["message"]),t("div",null,[t("div",Y,[e(o,{type:"primary"},{default:a(()=>[u("长途")]),_:1}),e(o,{type:"error"},{default:a(()=>[u("易碎")]),_:1}),e(o,{type:"warning"},{default:a(()=>[u("贵重")]),_:1}),e(o,{type:"success"},{default:a(()=>[u("特快")]),_:1})]),t("span",{class:g(["jishaochengduo-result",l(95)==="失败"?"jishaochengduo-result-error":l(95).substring(0,4)==="可能失败"?"jishaochengduo-result-warning":"jishaochengduo-result-success"])},c(l(95)),3)]),t("div",null,[t("div",Z,[e(o,{type:"primary"},{default:a(()=>[u("长途")]),_:1}),e(o,{type:"error"},{default:a(()=>[u("易碎")]),_:1}),e(o,{type:"warning"},{default:a(()=>[u("贵重")]),_:1}),e(o,null,{default:a(()=>[u("普快")]),_:1})]),t("span",{class:g(["jishaochengduo-result",l(85)==="失败"?"jishaochengduo-result-error":l(85).substring(0,4)==="可能失败"?"jishaochengduo-result-warning":"jishaochengduo-result-success"])},c(l(85)),3)]),t("div",null,[t("div",ee,[e(o,{type:"primary"},{default:a(()=>[u("长途")]),_:1}),e(o,{type:"error"},{default:a(()=>[u("易碎")]),_:1}),e(o,{type:"success"},{default:a(()=>[u("特快")]),_:1})]),t("span",{class:g(["jishaochengduo-result",l(77)==="失败"?"jishaochengduo-result-error":l(77).substring(0,4)==="可能失败"?"jishaochengduo-result-warning":"jishaochengduo-result-success"])},c(l(77)),3)]),t("div",null,[t("div",ae,[e(o,{type:"primary"},{default:a(()=>[u("长途")]),_:1}),e(o,{type:"warning"},{default:a(()=>[u("贵重")]),_:1}),e(o,{type:"success"},{default:a(()=>[u("特快")]),_:1})]),t("span",{class:g(["jishaochengduo-result",l(73)==="失败"?"jishaochengduo-result-error":l(73).substring(0,4)==="可能失败"?"jishaochengduo-result-warning":"jishaochengduo-result-success"])},c(l(73)),3)]),t("div",null,[t("div",se,[e(o,{type:"primary"},{default:a(()=>[u("长途")]),_:1}),e(o,{type:"error"},{default:a(()=>[u("易碎")]),_:1}),e(o,null,{default:a(()=>[u("普快")]),_:1})]),t("span",{class:g(["jishaochengduo-result",l(67)==="失败"?"jishaochengduo-result-error":l(67).substring(0,4)==="可能失败"?"jishaochengduo-result-warning":"jishaochengduo-result-success"])},c(l(67)),3)]),t("div",null,[t("div",te,[e(o,{type:"primary"},{default:a(()=>[u("长途")]),_:1}),e(o,{type:"error"},{default:a(()=>[u("易碎")]),_:1}),e(o,{type:"warning"},{default:a(()=>[u("贵重")]),_:1})]),t("span",{class:g(["jishaochengduo-result",l(65)==="失败"?"jishaochengduo-result-error":l(65).substring(0,4)==="可能失败"?"jishaochengduo-result-warning":"jishaochengduo-result-success"])},c(l(65)),3)]),t("div",null,[t("div",ue,[e(o,{type:"primary"},{default:a(()=>[u("长途")]),_:1}),e(o,{type:"warning"},{default:a(()=>[u("贵重")]),_:1}),e(o,null,{default:a(()=>[u("普快")]),_:1})]),t("span",{class:g(["jishaochengduo-result",l(63)==="失败"?"jishaochengduo-result-error":l(63).substring(0,4)==="可能失败"?"jishaochengduo-result-warning":"jishaochengduo-result-success"])},c(l(63)),3)]),t("div",null,[t("div",le,[e(o,{type:"primary"},{default:a(()=>[u("长途")]),_:1}),e(o,{type:"success"},{default:a(()=>[u("特快")]),_:1})]),t("span",{class:g(["jishaochengduo-result",l(55)==="失败"?"jishaochengduo-result-error":l(55).substring(0,4)==="可能失败"?"jishaochengduo-result-warning":"jishaochengduo-result-success"])},c(l(55)),3)]),t("div",null,[t("div",oe,[e(o,{type:"primary"},{default:a(()=>[u("长途")]),_:1}),e(o,null,{default:a(()=>[u("普快")]),_:1})]),t("span",{class:g(["jishaochengduo-result",l(45)==="失败"?"jishaochengduo-result-error":l(45).substring(0,4)==="可能失败"?"jishaochengduo-result-warning":"jishaochengduo-result-success"])},c(l(45)),3)]),t("div",null,[t("div",re,[e(o,{type:"primary"},{default:a(()=>[u("长途")]),_:1})]),t("span",{class:g(["jishaochengduo-result",l(25)==="失败"?"jishaochengduo-result-error":l(25).substring(0,4)==="可能失败"?"jishaochengduo-result-warning":"jishaochengduo-result-success"])},c(l(25)),3)]),t("div",ne,[e(M,{type:"primary",onClick:z},{default:a(()=>[u("添加")]),_:1})]),e(q,{columns:R,data:m.value.map(i=>v.value[i]),"primary-key":"uuid",onSelectionChange:W},{operation:a(({row:i})=>[e(M,{type:"text",status:"normal",size:"small",onClick:d=>J(i)},{default:a(()=>[u("编辑")]),_:2},1032,["onClick"]),e(M,{type:"text",status:"normal",size:"small",onClick:d=>N(i)},{default:a(()=>[u("复制")]),_:2},1032,["onClick"]),e(M,{type:"text",status:"danger",size:"small",onClick:d=>F(i)},{default:a(()=>[u("删除")]),_:2},1032,["onClick"])]),_:1},8,["data"]),e(O,{modelValue:p.value,"onUpdate:modelValue":r[2]||(r[2]=i=>p.value=i),title:x.value==="add"?"添加":"编辑","title-align":"start",width:300,onOk:T},{default:a(()=>[e(w(S),{ref_key:"formRef",ref:E,model:n.value,"label-width":40},{default:a(()=>[e(w(y),{label:"里程",name:"mileage"},{default:a(()=>[e(k,{modelValue:n.value.mileage,"onUpdate:modelValue":r[0]||(r[0]=i=>n.value.mileage=i)},null,8,["modelValue"])]),_:1}),e(w(y),{label:"经验",name:"exp"},{default:a(()=>[e(k,{modelValue:n.value.exp,"onUpdate:modelValue":r[1]||(r[1]=i=>n.value.exp=i)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])]))}}),we=K(ie,[["__scopeId","data-v-4c71c610"]]);export{we as default};
