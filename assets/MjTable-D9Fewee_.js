import{M as c}from"./MjCheckbox-CRx5YV5s.js";import{d as K,c as v,a as f,o as a,b as r,e as o,n as h,z as m,F as y,l as p,E as w,s as N,v as b,f as j,L as V,M as B,t as A,_ as D}from"./index-C8_KvqLc.js";const z={key:0},L={key:0},T=K({__name:"MjTable",props:{columns:{},data:{},primaryKey:{},tdDefaultValue:{default:"-"},border:{type:Boolean,default:!0},rowSelection:{}},emits:["select","selection-change"],setup(k,{emit:g}){const u=k,d=g,S=v(()=>{const e=["mj-table"];return u.border&&e.push("mj-table--border"),e}),C=v(()=>u.columns.reduce((e,n)=>e+Math.max(n.minWidth||0,n.width||0),0)),M=f(!1),i=f([]),W=(e,n)=>{const t=e[u.primaryKey],l=i.value.indexOf(t);l===-1&&n?(i.value.push(e[u.primaryKey]),d("select",i.value,t,n),d("selection-change",i.value)):l>-1&&!n?(i.value.splice(l,1),d("select",i.value,t,n),d("selection-change",i.value)):d("select",i.value,t,n)};return(e,n)=>(a(),r("div",{class:N(S.value)},[o("table",{class:"mj-table-content",style:h({width:`${C.value}px`})},[o("colgroup",null,[e.rowSelection?(a(),r("col",{key:0,style:h({width:`${e.rowSelection.width}px`,minWidth:`${e.rowSelection.width}px`})},null,4)):m("",!0),(a(!0),r(y,null,p(e.columns,t=>(a(),r("col",{key:`col-${t.name}`,style:h({width:`${t.width}px`,minWidth:`${t.width&&t.minWidth?Math.max(t.width,t.minWidth):t.width||t.minWidth}px`,maxWidth:`${t.width&&t.minWidth?Math.max(t.width,t.minWidth):t.width}px`})},null,4))),128))]),o("thead",null,[o("tr",null,[e.rowSelection?(a(),r("th",z,[e.rowSelection.showCheckedAll?(a(),w(c,{key:0,checked:M.value},null,8,["checked"])):m("",!0)])):m("",!0),(a(!0),r(y,null,p(e.columns,t=>(a(),r("th",{key:`thead-${t.name}`,style:h({textAlign:t.align})},b(t.title??t.name),5))),128))])]),o("tbody",null,[(a(!0),r(y,null,p(e.data,(t,l)=>(a(),r("tr",{key:`tbody-tr-${e.primaryKey?t[e.primaryKey]:l}`},[e.rowSelection?(a(),r("td",L,[j(c,{checked:i.value.includes(t[e.primaryKey]),onChange:s=>W(t,s)},null,8,["checked","onChange"])])):m("",!0),(a(!0),r(y,null,p(e.columns,s=>(a(),r("td",{key:`tbody-td-${e.primaryKey?t[e.primaryKey]:l}-${s.name}`,style:h({textAlign:s.align})},[s.slotName?V(e.$slots,s.slotName,{key:0,value:e.data[l][s.name],row:t,index:l},void 0,!0):s.render?(a(),w(B(s.render),{key:1,record:e.data[l],value:e.data[l][s.name],index:l},null,8,["record","value","index"])):(a(),r(y,{key:2},[A(b((s.formatter?s.formatter(e.data[l][s.name],t,l):e.data[l][s.name])??e.tdDefaultValue),1)],64))],4))),128))]))),128))])],4)],2))}}),F=D(T,[["__scopeId","data-v-da98172a"]]);export{F as M};
