import{M}from"./MjButton-BmN55pLQ.js";import{M as U}from"./MjInput-dmF8qiW0.js";import{M as s}from"./MjSelect-CB5zIzi7.js";import{M as g}from"./MjSwitch-cGSJiosA.js";import{g as C}from"./index-C1s-hTSf.js";import{d as N}from"./date-BJ_dEscf.js";import{d as D,a as T,o as n,b as u,f as c,w as x,e as B,F as L,l as A,t as E,E as d,z as p,u as b,_ as Y}from"./index-C8_KvqLc.js";import"./LoadingIcon.vue_vue_type_script_setup_true_lang-Cjl4ccjb.js";import"./index-V9QYX3jy.js";const F={class:"alarm-clock"},H={class:"alarm-clock-list"},I=D({__name:"AlarmClock",setup(S){const V=[{label:"普通",value:1},{label:"随机",value:2}],r=T([]),k=[{label:"一次",value:1},{label:"每天",value:2}],y=new Array(24).fill(1).map((l,t)=>({label:`0${t}`.slice(-2),value:t})),v=new Array(60).fill(1).map((l,t)=>({label:`0${t}`.slice(-2),value:t})),_=()=>{r.value.push({uuid:C(),type:1,interval:1,enable:!1,time:[0,0]})},f=({i:l,delay:t,stos:e,times:a})=>setTimeout(()=>{e[l]=null,e.forEach((o,i)=>{o&&(clearTimeout(o),e[i]=f({i,delay:Date.now()-a[i],stos:e,times:a}))}),w({body:"随机"})},Math.max(0,t)),h=(l,t)=>{const e=r.value.find(a=>a.uuid===t.uuid);if(l){if(e&&e.type===2){e.time=[],e.sto=[];const a=new Date;a.setHours(9),a.setMinutes(30),a.setSeconds(0);for(let o=0;o<e.interval;o++){const i=Math.floor(Math.random()*540),m=a.getTime()+i*6e4;e.time[o]=m,m>Date.now()&&(e.sto[o]=f({i:o,delay:m-Date.now(),stos:e.sto,times:e.time}))}console.log(e.time.map(o=>N("YYYY-MM-DD HH:mm:ss",new Date(o))))}}else e&&e.type===2&&e.sto.forEach((a,o)=>{a&&(clearTimeout(a),e.sto[o]=null)})},w=({title:l="闹钟",body:t="内容"}={})=>{switch(Notification.permission){case"default":Notification.requestPermission().then(e=>{e==="granted"&&new Notification(l,{body:t})});break;case"granted":new Notification(l,{body:t});break;case"denied":console.warn("通知权限已被拒绝");break}};return(l,t)=>(n(),u("div",F,[c(M,{type:"primary",onClick:_},{default:x(()=>[E("添加闹钟")]),_:1}),B("div",H,[(n(!0),u(L,null,A(r.value,e=>(n(),u("div",{class:"alarm-clock-item",key:e.uuid},[c(s,{modelValue:e.type,"onUpdate:modelValue":a=>e.type=a,options:V,disabled:e.enable},null,8,["modelValue","onUpdate:modelValue","disabled"]),e.type===1?(n(),d(s,{key:0,modelValue:e.interval,"onUpdate:modelValue":a=>e.interval=a,options:k,disabled:e.enable},null,8,["modelValue","onUpdate:modelValue","disabled"])):e.type===2?(n(),d(U,{key:1,modelValue:e.interval,"onUpdate:modelValue":a=>e.interval=a,placeholder:"请输入闹钟数量",disabled:e.enable},null,8,["modelValue","onUpdate:modelValue","disabled"])):p("",!0),e.type===1?(n(),d(s,{key:2,modelValue:e.time[0],"onUpdate:modelValue":a=>e.time[0]=a,options:b(y),disabled:e.enable},null,8,["modelValue","onUpdate:modelValue","options","disabled"])):p("",!0),e.type===1?(n(),d(s,{key:3,modelValue:e.time[1],"onUpdate:modelValue":a=>e.time[1]=a,options:b(v),disabled:e.enable},null,8,["modelValue","onUpdate:modelValue","options","disabled"])):p("",!0),c(g,{modelValue:e.enable,"onUpdate:modelValue":a=>e.enable=a,onChange:a=>h(a,e)},null,8,["modelValue","onUpdate:modelValue","onChange"])]))),128))])]))}}),Q=Y(I,[["__scopeId","data-v-7b4bd617"]]);export{Q as default};
