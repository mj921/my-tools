import{M as g}from"./MjInput-dmF8qiW0.js";import{M as p}from"./MjButton-BmN55pLQ.js";import{M as L}from"./MjTable-D9Fewee_.js";import{d as M,a as u,o as c,b as d,f as r,w as m,t as v,F as T,l as x,n as V,v as y,_ as I}from"./index-C8_KvqLc.js";import"./LoadingIcon.vue_vue_type_script_setup_true_lang-Cjl4ccjb.js";import"./MjCheckbox-CRx5YV5s.js";const C=M({__name:"RankFightView",setup(F){const i=u(20),e=u([]),l=u(0),k=[{name:"id"},{title:"剩余防守次数",name:"defTimes"},{title:"进攻列表",name:"attackList",slotName:"attackList"}],h=()=>{if(l.value>=i.value)return;const n=e.value[l.value].id,t=[];e.value.forEach(a=>{[...e.value[l.value].attackList,n].includes(a.id)||(t[a.defTimes]||(t[a.defTimes]=[[],[]]),t[a.defTimes][a.attackList.length===8?1:0].push(a.id))});const s=t[t.length-1][0].length>0?t[t.length-1][0]:t[t.length-1][1],o=s[Math.floor(s.length*Math.random())];e.value[l.value].attackList.push(o),e.value[o-1].defTimes--,e.value[l.value].attackList.length===8&&l.value++},f=()=>{l.value=0,e.value=[];for(let n=1;n<=i.value;n++)e.value.push({id:n,defTimes:8,attackList:[]})};return f(),(n,t)=>(c(),d("div",null,[r(g,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=s=>i.value=s),placeholder:"人数"},null,8,["modelValue"]),r(p,{onClick:f},{default:m(()=>[v("重新开始")]),_:1}),r(p,{onClick:h},{default:m(()=>[v("下一步")]),_:1}),r(L,{columns:k,data:e.value,"primary-key":"id"},{attackList:m(({row:s})=>[(c(!0),d(T,null,x(s.attackList,(o,a)=>(c(),d("span",{style:V({color:s.attackList.filter(_=>_===o).length>1?"red":void 0}),key:`attackList-${a}-${o}`},y(o),5))),128))]),_:1},8,["data"])]))}}),R=I(C,[["__scopeId","data-v-f1c6dda3"]]);export{R as default};
