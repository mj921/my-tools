var _e=Object.defineProperty;var we=(c,o,p)=>o in c?_e(c,o,{enumerable:!0,configurable:!0,writable:!0,value:p}):c[o]=p;var B=(c,o,p)=>we(c,typeof o!="symbol"?o+"":o,p);import{d as W,a as h,r as Ce,f as I,T as $e,F as _,o as r,b as v,e as l,s as b,p as ce,g as re,_ as X,c as ae,l as E,n as J,E as Me,w as R,u as D,v as $,z as Z,C as ue,D as ne,t as q,G as je}from"./index-C8_KvqLc.js";import{_ as xe}from"./close-BsqjmWw_.js";import{a as H}from"./index-C1s-hTSf.js";import{d as Q}from"./date-BJ_dEscf.js";import"./index-V9QYX3jy.js";const Ne="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1726283745801'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='12976'%20width='256'%20height='256'%20xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cpath%20d='M315.584%20277.802667a41.813333%2041.813333%200%201%201-83.605333%200.021333%2041.813333%2041.813333%200%200%201%2083.605333-0.021333z%20m476.458667%200a41.813333%2041.813333%200%201%201-83.584%200.021333%2041.813333%2041.813333%200%200%201%2083.584-0.021333zM231.957333%20746.197333a41.813333%2041.813333%200%201%201%2083.605334-0.042666%2041.813333%2041.813333%200%200%201-83.605334%200.042666z%20m476.48%200a41.813333%2041.813333%200%201%201%2083.584-0.042666%2041.813333%2041.813333%200%200%201-83.584%200.042666zM441.258667%20361.962667a73.088%2073.088%200%201%200%200%20146.176%2073.088%2073.088%200%200%200%200-146.176z%20m310.528%20124.202666H853.333333v51.690667h-101.546666a241.237333%20241.237333%200%200%201-213.952%20213.909333v101.546667h-51.669334v-101.546667a241.237333%20241.237333%200%200%201-213.930666-213.909333H170.666667v-51.690667h101.568A241.237333%20241.237333%200%200%201%20486.165333%20272.213333V170.666667h51.669334v101.546666A241.216%20241.216%200%200%201%20751.786667%20486.186667z'%20fill='%234C4C4C'%20p-id='12977'%3e%3c/path%3e%3c/svg%3e",Se="data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1726284037759'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='41637'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='256'%20height='256'%3e%3cpath%20d='M180.770572%200.268458C150.618911%200.268458%20120.524247%2018.336656%20120.524247%2043.586535V980.624926c0%2025.249879%2025.135884%2043.318076%2060.246325%2043.318077s60.246325-18.068198%2060.246325-43.318077V43.586535A58.707393%2058.707393%200%200%200%20180.713574%200.268458z%20m541.988933%2092.050913a356.177184%20356.177184%200%200%201-180.681977-46.053955%20331.326288%20331.326288%200%200%200-361.249959%2015.389316v510.070351A359.084055%20359.084055%200%200%201%20361.167561%20510.395806a346.658607%20346.658607%200%200%201%20180.681977%2046.053955%20331.26929%20331.26929%200%200%200%20361.306957-15.332319V30.990094a358.343088%20358.343088%200%200%201-180.39699%2061.329277z'%20fill='%23F9463F'%20p-id='41638'%3e%3c/path%3e%3c/svg%3e";var d=(c=>(c[c.Closed=0]="Closed",c[c.Mark=1]="Mark",c[c.Opened=2]="Opened",c))(d||{});class De{constructor(o,p,M){B(this,"x");B(this,"y");B(this,"status");B(this,"type",0);B(this,"arroundCells",[]);this.x=o,this.y=p,this.status=M}toJSON(){return{x:this.x,y:this.y,status:this.status,type:this.type,arroundCellNum:this.arroundCells.length}}toString(){return{x:this.x,y:this.y,status:this.status,type:this.type,arroundCellNum:this.arroundCells.length}}}const oe=W({setup(c,{slots:o}){const p=h(!1),M=Ce({left:0,top:0}),a=m=>{p.value=!p.value,m.stopPropagation()},O=m=>{p.value=!1},w=m=>{const f=m==null?void 0:m.nextElementSibling;if(f){f.removeEventListener("click",a),window.removeEventListener("click",O),f.addEventListener("click",a),window.addEventListener("click",O);const y=f==null?void 0:f.getBoundingClientRect();M.top=(y==null?void 0:y.bottom)||0,M.left=((y==null?void 0:y.left)||0)+(y.width||0)/2}};return()=>{var m;return I(_,{ref:w},[[...((m=o.default)==null?void 0:m.call(o))||[],I($e,{to:document.body},{default:()=>{var f;return[I("div",{class:"mine-clearance-popper-content",style:{left:M.left+"px",top:M.top+"px",display:p.value?void 0:"none"}},[(f=o.content)==null?void 0:f.call(o)])]}})]])}}}),ve=c=>(ce("data-v-ebbc7578"),c=c(),re(),c),Te={class:"mj-electronic-number"},Oe={key:0,class:"mj-electronic-number-box mj-electronic-number-box--colon"},Ee=ve(()=>l("div",{class:"mj-electronic-number-dot-top"},null,-1)),Ie=ve(()=>l("div",{class:"mj-electronic-number-dot-bottom"},null,-1)),Le=[Ee,Ie],ze={key:1,class:"mj-electronic-number-box"},Be=W({__name:"MjElectronicNumber",props:{value:{default:""}},setup(c){return(o,p)=>(r(),v("div",Te,[o.value===":"?(r(),v("div",Oe,Le)):(r(),v("div",ze,[l("div",{class:b({"mj-electronic-number-top":!0,"mj-electronic-number--active":["0","2","3","5","6","7","8","9"].includes(o.value.toString())})},null,2),l("div",{class:b({"mj-electronic-number-topleft":!0,"mj-electronic-number--active":["0","4","5","6","8","9"].includes(o.value.toString())})},null,2),l("div",{class:b({"mj-electronic-number-topright":!0,"mj-electronic-number--active":["0","1","2","3","4","7","8","9"].includes(o.value.toString())})},null,2),l("div",{class:b({"mj-electronic-number-center":!0,"mj-electronic-number--active":["2","3","4","5","6","8","9","-"].includes(o.value.toString())})},null,2),l("div",{class:b({"mj-electronic-number-bottomleft":!0,"mj-electronic-number--active":["0","2","6","8"].includes(o.value.toString())})},null,2),l("div",{class:b({"mj-electronic-number-bottomright":!0,"mj-electronic-number--active":["0","1","3","4","5","6","7","8","9"].includes(o.value.toString())})},null,2),l("div",{class:b({"mj-electronic-number-bottom":!0,"mj-electronic-number--active":["0","2","3","5","6","8","9"].includes(o.value.toString())})},null,2)]))]))}}),He=X(Be,[["__scopeId","data-v-ebbc7578"]]),Ye=W({__name:"MjElectronicNumbers",props:{value:{default:0},isTime:{type:Boolean,default:!1},bgColor:{default:"#000"},defaultColor:{default:"#333"},activeColor:{default:"#f00"},width:{default:8},size:{default:40},paddingBlock:{default:8},paddingInline:{default:8},boxPaddingInline:{default:0},boxPaddingBlock:{default:0},offset:{default:1},minNumCount:{default:0}},setup(c){const o=c,p=ae(()=>+o.value||0),M=ae(()=>{let a=p.value;if(o.isTime){const w=[];return w.unshift(...H(a%60).split("")),a=Math.floor(a/60),w.unshift(...H(a%60).split(""),":"),a=Math.floor(a/60),a>0&&w.unshift(...a.toString().split(""),":"),w}const O=p.value.toString();return o.minNumCount<=O.length?p.value.toString().split(""):H(p.value,o.minNumCount)});return(a,O)=>(r(),v("div",{class:"mj-electronic-numbers",style:J({padding:`${a.boxPaddingBlock}px ${a.boxPaddingInline}px`,backgroundColor:a.bgColor,"--mj-electronic-number-bg":a.bgColor,"--mj-electronic-number-default":a.defaultColor,"--mj-electronic-number-active":a.activeColor,"--mj-electronic-number-width":`${a.width}px`,"--mj-electronic-number-size":`${a.size}px`,"--mj-electronic-number-padding-block":`${a.paddingBlock}px`,"--mj-electronic-number-padding-inline":`${a.paddingInline}px`,"--mj-electronic-number-offset":`${a.offset}px`})},[(r(!0),v(_,null,E(M.value,(w,m)=>(r(),Me(He,{key:m,value:w},null,8,["value"]))),128))],4))}}),ie=X(Ye,[["__scopeId","data-v-602301bb"]]),T=c=>(ce("data-v-8606ee38"),c=c(),re(),c),Ve={class:"mine-clearance"},Pe=T(()=>l("button",null,"开始游戏",-1)),Ge={class:"mine-clearance-difficulty"},Ae=["onClick"],Fe=T(()=>l("button",null,"重新开始",-1)),Re={class:"mine-clearance-difficulty"},Je=["onClick"],We={class:"mine-clearance-status-bar"},Ue={class:"mine-clearance-box"},Ke=["data-kkk","data-iii","onClick","onContextmenu"],Ze={key:0,src:Ne},qe={key:1},Qe={key:1,src:Se},Xe={class:"mc-dialog"},et={class:"mc-dialog-mask"},tt={class:"mc-dialog-box"},lt={class:"mc-dialog-difficulties"},st=["onClick"],at=T(()=>l("hr",null,null,-1)),ut={class:"mc-dialog-info"},nt=T(()=>l("label",{for:""},"总次数",-1)),ot=T(()=>l("label",{for:""},"胜利次数",-1)),it=T(()=>l("label",{for:""},"胜率",-1)),ct=T(()=>l("hr",null,null,-1)),rt={class:"mc-dialog-tabs"},vt={key:0,class:"mc-dialog-lists"},dt=T(()=>l("li",null,[l("dd",null,"用时"),l("dd",null,"时间")],-1)),mt=["innerHTML"],pt=T(()=>l("li",null,[l("dd",null,"用时"),l("dd",null,"时间")],-1)),ft=["innerHTML"],ht=T(()=>l("li",null,[l("dd",null,"用时"),l("dd",null,"时间")],-1)),gt=["innerHTML"],bt=1,yt=W({__name:"MineClearance",setup(c){const o={简单:{rows:9,cols:9,nums:10},中等:{rows:16,cols:16,nums:40},困难:{rows:16,cols:30,nums:99},极难:{rows:24,cols:30,nums:180}},p=localStorage.getItem("mineClearanceRecord");let M={简单:{best:[],worst:[],latest:[],playNum:0,successNum:0},中等:{best:[],worst:[],latest:[],playNum:0,successNum:0},困难:{best:[],worst:[],latest:[],playNum:0,successNum:0},极难:{best:[],worst:[],latest:[],playNum:0,successNum:0}};if(localStorage.setItem("mineClearanceVersion",bt.toString()),p)try{M=JSON.parse(p)}catch{}const a=h(M),O=[{key:"简单",label:"简单"},{key:"中等",label:"中等"},{key:"困难",label:"困难"},{key:"极难",label:"极难"}],w=h(!1),m=h("简单"),f=h("best"),y=h(""),u=h([]),j=h(9),C=h(9),Y=h(10),L=h(0),V=h(0),g=h("简单"),x=h(0),P=h(0),z=h(0),k=h("init"),N=h(0),G=h(null),A=(n=0,s=!1)=>`${H(Math.floor(n/6e4))}:${H(Math.floor(n%6e4/1e3))}${s?`.${H(n%1e3,3)}`:""}`,F=()=>{u.value=[];for(let e=0;e<j.value;e++){const t=[];for(let i=0;i<C.value;i++)t.push(new De(e,i,0));u.value.push(t)}const n=[];let s=0;for(n[0]=Math.floor(Math.random()*j.value*C.value),u.value[n[0]%j.value][Math.floor(n[0]/j.value)].status=-1;n.length<Y.value;)s=Math.floor(Math.random()*j.value*C.value),n.includes(s)||(u.value[s%j.value][Math.floor(s/j.value)].status=-1,n.push(s));for(let e=0;e<j.value;e++)for(let t=0;t<C.value;t++){const i=u.value[e][t].status===-1;e>0&&(t>0&&(i&&u.value[e-1][t-1].status>-1&&u.value[e-1][t-1].status++,u.value[e-1][t-1].arroundCells.push(u.value[e][t])),i&&u.value[e-1][t].status>-1&&u.value[e-1][t].status++,u.value[e-1][t].arroundCells.push(u.value[e][t]),t<C.value-1&&(i&&u.value[e-1][t+1].status>-1&&u.value[e-1][t+1].status++,u.value[e-1][t+1].arroundCells.push(u.value[e][t]))),e<j.value-1&&(t>0&&(i&&u.value[e+1][t-1].status>-1&&u.value[e+1][t-1].status++,u.value[e+1][t-1].arroundCells.push(u.value[e][t])),i&&u.value[e+1][t].status>-1&&u.value[e+1][t].status++,u.value[e+1][t].arroundCells.push(u.value[e][t]),t<C.value-1&&(i&&u.value[e+1][t+1].status>-1&&u.value[e+1][t+1].status++,u.value[e+1][t+1].arroundCells.push(u.value[e][t]))),t>0&&(i&&u.value[e][t-1].status>-1&&u.value[e][t-1].status++,u.value[e][t-1].arroundCells.push(u.value[e][t])),t<C.value-1&&(i&&u.value[e][t+1].status>-1&&u.value[e][t+1].status++,u.value[e][t+1].arroundCells.push(u.value[e][t]))}},de=()=>{F()},me=()=>{const n=Date.now();k.value==="playing"?(k.value="paused",P.value+=n-z.value,x.value=P.value,N.value&&clearTimeout(N.value)):k.value==="paused"&&(k.value="playing",z.value=n,N.value=setTimeout(U,1e3))},U=()=>{k.value==="playing"&&(x.value=P.value+Date.now()-z.value,N.value=setTimeout(U,1e3))},ee=(n="简单")=>{N.value&&clearTimeout(N.value),g.value=n;const s=o[n];j.value=s.rows,C.value=s.cols,Y.value=s.nums,F(),L.value=C.value*j.value,z.value=Date.now(),P.value=0,x.value=0,k.value="playing",V.value=0,N.value=setTimeout(U,1e3)};de();const pe=()=>{N.value&&clearTimeout(N.value),y.value="",x.value=0,k.value="init",F()},te=(n=!0)=>{const s=Date.now();x.value+=s-z.value,N.value&&clearTimeout(N.value),k.value="finish",n?(a.value[g.value].best.push([x.value,s]),a.value[g.value].best.sort((e,t)=>e[0]-t[0]),a.value[g.value].best.length>10&&a.value[g.value].best.pop(),a.value[g.value].worst.push([x.value,s]),a.value[g.value].worst.sort((e,t)=>t[0]-e[0]),a.value[g.value].worst.length>10&&a.value[g.value].worst.pop(),a.value[g.value].latest.unshift([x.value,s]),a.value[g.value].latest.length>10&&a.value[g.value].latest.shift(),a.value[g.value].successNum++,y.value=`通关${g.value}难度，用时${A(x.value)}！`):y.value="游戏结束！",a.value[g.value].playNum++,localStorage.setItem("mineClearanceRecord",JSON.stringify(a.value)),setTimeout(()=>{z.value=0,y.value="",x.value=0,k.value="init",F()},2e3)},le=()=>{te(!1)},se=()=>{L.value===Y.value&&te()},fe=(n,s)=>{const e=u.value[n][s];if(e.type===d.Closed){if(L.value--,e.status===-1)e.type=d.Opened,le();else if(e.status===0){const t=[e];let i=t.shift();for(;i;)i.type=d.Opened,i.arroundCells.forEach(S=>{S.type===d.Closed&&S.status===0&&t.push(S),S.type===d.Closed&&S.status!==-1&&(L.value--,S.type=d.Opened)}),i=t.shift()}else e.type=d.Opened;se()}},he=(n,s,e)=>{e.preventDefault(),k.value==="playing"&&u.value[n][s].type!==d.Opened&&(u.value[n][s].type===d.Closed?(u.value[n][s].type=d.Mark,V.value++):(u.value[n][s].type=d.Closed,V.value--))},ge=n=>{var s=!1,e=0;return n.arroundCells.forEach(t=>{t.type===d.Mark&&(e++,t.status!==-1&&(s=!0))}),s&&e>=n.status?(le(),"gameOver"):!s&&e===n.status?"open":"show"},be=n=>{const s=[];n.arroundCells.forEach(t=>{t.status===0&&s.push(t),t.status!==-1&&t.type===d.Closed&&(t.type=d.Opened,L.value--)});let e=s.shift();for(;e;)e.type=d.Opened,e.arroundCells.forEach(t=>{t.type===d.Closed&&t.status===0&&s.push(t),t.status!==-1&&t.type===d.Closed&&(t.type=d.Opened,L.value--)}),e=s.shift();se()},ye=(n,s)=>{const e=u.value[n][s];if(e.type===d.Opened)switch(ge(e)){case"open":be(e);break;case"show":G.value=e,setTimeout(()=>{G.value=null},300);break}},ke=(n,s,e)=>{k.value==="playing"&&(e.altKey?ye(n,s):fe(n,s))};return(n,s)=>(r(),v("div",Ve,[l("div",{class:"mine-clearance-btn-bar",style:J({width:`${C.value*20+26}px`})},[k.value==="init"?(r(),v(_,{key:0},[I(D(oe),null,{content:R(()=>[l("ul",Ge,[(r(),v(_,null,E(O,e=>l("li",{key:"difficuty"+e.key,onClick:t=>ee(e.key)},$(e.label),9,Ae)),64))])]),default:R(()=>[Pe]),_:1}),l("button",{onClick:s[0]||(s[0]=e=>w.value=!0)},"记录")],64)):["playing","paused"].includes(k.value)?(r(),v(_,{key:1},[I(D(oe),null,{content:R(()=>[l("ul",Re,[(r(),v(_,null,E(O,e=>l("li",{key:"difficuty"+e.key,onClick:t=>ee(e.key)},$(e.label),9,Je)),64))])]),default:R(()=>[Fe]),_:1}),l("button",{onClick:me},$(k.value==="playing"?"暂停":"继续"),1),l("button",{onClick:pe},"主菜单")],64)):Z("",!0)],4),l("div",We,[l("div",{class:"mine-clearance-status-bar-box",style:J({width:`${C.value*20-8}px`})},[I(ie,{"is-time":"",value:Math.floor(x.value/1e3),width:2,size:6,offset:1,"padding-block":4,"padding-inline":2,"box-padding-inline":4},null,8,["value"]),I(ie,{value:Y.value-V.value,width:2,size:6,offset:1,"padding-block":4,"padding-inline":2,"box-padding-inline":4,"min-num-count":Y.value>99?3:2},null,8,["value","min-num-count"])],4)]),l("div",Ue,[l("div",{class:"mc-panel",style:J({width:`${C.value*20}px`})},[(r(!0),v(_,null,E(u.value,(e,t)=>(r(),v(_,null,[(r(!0),v(_,null,E(e,(i,S)=>(r(),v("dl",{key:`cell-${t}-${S}`,"data-kkk":`cell-${i.x}-${i.y}`,"data-iii":`cell-${t}-${S}`,class:b({open:i.type===D(d).Opened,mark:i.type===D(d).Mark,flicker:G.value&&i.type!==D(d).Opened&&i.arroundCells.includes(G.value)}),onClick:K=>ke(t,S,K),onContextmenu:je(K=>he(t,S,K),["right"])},[i.type===D(d).Opened?(r(),v(_,{key:0},[i.status===-1?(r(),v("img",Ze)):(r(),v("span",qe,$(i.status||""),1))],64)):i.type===D(d).Mark?(r(),v("img",Qe)):Z("",!0)],42,Ke))),128))],64))),256))],4)]),ue(l("div",Xe,[l("div",et,[l("div",tt,[l("img",{class:"mc-dialog-close",src:xe,onClick:s[1]||(s[1]=e=>w.value=!1)}),l("div",lt,[(r(),v(_,null,E(O,e=>l("dl",{key:`dialog-difficultiy${e.key}`,class:b({"mc-dialog-difficulties--active":m.value===e.key}),onClick:t=>m.value=e.key},$(e.label),11,st)),64))]),at,l("div",ut,[l("dl",null,[nt,q($(a.value[m.value].playNum||0),1)]),l("dl",null,[ot,q($(a.value[m.value].successNum||0),1)]),l("dl",null,[it,q(" "+$((a.value[m.value].playNum||0)>0?((a.value[m.value].successNum||0)/(a.value[m.value].playNum||0)*100).toFixed(2):0)+"% ",1)])]),ct,l("div",rt,[l("dl",{key:"best",class:b({"mc-dialog-tab--active":f.value==="best"}),onClick:s[2]||(s[2]=e=>f.value="best")}," 用时最短 ",2),l("dl",{key:"worst",class:b({"mc-dialog-tab--active":f.value==="worst"}),onClick:s[3]||(s[3]=e=>f.value="worst")}," 用时最长 ",2),l("dl",{key:"latest",class:b({"mc-dialog-tab--active":f.value==="latest"}),onClick:s[4]||(s[4]=e=>f.value="latest")}," 最近游戏 ",2)]),m.value&&a.value[m.value]?(r(),v("div",vt,[l("ul",{class:b({"mc-dialog-list":!0,"mc-dialog-list--active":f.value==="best"})},[dt,(r(!0),v(_,null,E(a.value[m.value].best,(e,t)=>(r(),v("li",{key:`best-${t}`},[l("dd",{innerHTML:A(e[0],!0).replace(/(\.\d{3})$/,"<small>$1</small>")},null,8,mt),l("dd",null,$(e[1]?D(Q)("YYYY-MM-DD HH:mm:ss",new Date(e[1])):"-"),1)]))),128))],2),l("ul",{class:b({"mc-dialog-list":!0,"mc-dialog-list--active":f.value==="worst"})},[pt,(r(!0),v(_,null,E(a.value[m.value].worst,(e,t)=>(r(),v("li",{key:`worst-${t}`},[l("dd",{innerHTML:A(e[0],!0).replace(/(\.\d{3})$/,"<small>$1</small>")},null,8,ft),l("dd",null,$(e[1]?D(Q)("YYYY-MM-DD HH:mm:ss",new Date(e[1])):"-"),1)]))),128))],2),l("ul",{class:b({"mc-dialog-list":!0,"mc-dialog-list--active":f.value==="latest"})},[ht,(r(!0),v(_,null,E(a.value[m.value].latest,(e,t)=>(r(),v("li",{key:`latest-${t}`},[l("dd",{innerHTML:A(e[0],!0).replace(/(\.\d{3})$/,"<small>$1</small>")},null,8,gt),l("dd",null,$(e[1]?D(Q)("YYYY-MM-DD HH:mm:ss",new Date(e[1])):"-"),1)]))),128))],2)])):Z("",!0)])])],512),[[ne,w.value]]),ue(l("div",{class:"mc-toast"},$(y.value),513),[[ne,!!y.value]])]))}}),jt=X(yt,[["__scopeId","data-v-8606ee38"]]);export{jt as default};
