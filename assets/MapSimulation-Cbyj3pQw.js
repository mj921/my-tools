var m=Object.defineProperty;var d=(l,e,t)=>e in l?m(l,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[e]=t;var r=(l,e,t)=>d(l,typeof e!="symbol"?e+"":e,t);import{d as v,a as p,o as y,b as x,e as a,v as o,F as M}from"./index-C8_KvqLc.js";const P=1,f=2,_=3e3,b=99,N={dazai:3,xiaozai:12,dashou:3,xiaoshou:12,normal:70},W={dazai:6,xiaozai:24,dashou:1,xiaoshou:6,normal:63},z={dazai:0,xiaozai:50,dashou:150,xiaoshou:130,normal:100};class c{constructor({isWar:e=!1}={}){r(this,"name","");r(this,"peopleMax",1e5);r(this,"people",1e4);r(this,"corruptState",1);r(this,"armyNum",1);r(this,"money",1e4);r(this,"corruptPercent",0);r(this,"isWar",!1);this.isWar=e}update(){const e=this.armyNum*_,t=this.people-e;let s=Math.random()*100,u=100;const n=this.isWar?W:N;for(const i in n)if(s<n[i]){u=z[i];break}else s-=n[i];const h=Math.floor(t*(u-this.corruptPercent)*.01-e*(this.isWar?f:P));this.money+=h,this.corruptPercent<=b&&(100-this.corruptPercent)*.007>Math.random()&&this.corruptPercent++,this.corruptPercent>=10&&Math.random()<.01*(100-this.corruptPercent)/100&&(this.corruptPercent-=10),this.money>0&&this.people<this.peopleMax&&(this.people=Math.min(this.peopleMax,this.people+Math.floor(this.peopleMax/100)*(.1+.9*(1-this.corruptPercent/100))))}}const g=v({__name:"MapSimulation",setup(l){const e=p(new c),t=p(new c({isWar:!0})),s=()=>{e.value.update(),t.value.update(),setTimeout(s,1e3)};return s(),(u,n)=>(y(),x(M,null,[a("div",null,[a("dl",null,"人口： "+o(e.value.people),1),a("dl",null,"人口上限： "+o(e.value.peopleMax),1),a("dl",null,"国库： "+o(e.value.money),1),a("dl",null,"军团： "+o(e.value.armyNum),1),a("dl",null,"腐败度： "+o(e.value.corruptPercent),1)]),a("div",null,[a("dl",null,"人口： "+o(t.value.people),1),a("dl",null,"人口上限： "+o(t.value.peopleMax),1),a("dl",null,"国库： "+o(t.value.money),1),a("dl",null,"军团： "+o(t.value.armyNum),1),a("dl",null,"腐败度： "+o(t.value.corruptPercent),1)])],64))}});export{g as default};
